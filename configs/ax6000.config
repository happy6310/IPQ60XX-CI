# ============================================
# ImmortalWrt for JDCloud 雅典娜 (RE-CS-02) - 主路由优化版
# ============================================

# ==================== 【1. 目标设备】 ====================
CONFIG_TARGET_qualcommax=y
CONFIG_TARGET_qualcommax_ipq60xx=y
CONFIG_TARGET_DEVICE_qualcommax_ipq60xx_DEVICE_jdcloud_re-cs-02=y

# ==================== 【2. 镜像设置】 ====================
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_IMAGES_GZIP=y
# 分区大小：根据128MB闪存调整，留足overlay空间
CONFIG_TARGET_ROOTFS_PARTSIZE=96
CONFIG_TARGET_KERNEL_PARTSIZE=16
CONFIG_TARGET_PER_DEVICE_ROOTFS=y
CONFIG_TARGET_ROOTFS_INITRAMFS=n

# ==================== 【3. 编译优化】 ====================
CONFIG_DEVEL=y
CONFIG_CCACHE=y
CONFIG_BUILD_LOG=y

# ==================== 【4. 内核与IPQ60XX核心驱动】 ====================
# 4.1 CPU调度与调频
CONFIG_PACKAGE_kmod-cpufreq=y
CONFIG_PACKAGE_kmod-cpufreq-ondemand=y
CONFIG_PACKAGE_kmod-cpufreq-schedutil=y
# 4.2 NSS硬件加速 (核心加速，务必启用)
CONFIG_PACKAGE_kmod-qca-nss-drv=y
CONFIG_PACKAGE_kmod-qca-nss-dp=y
CONFIG_PACKAGE_kmod-qca-nss-ecm=y
CONFIG_PACKAGE_kmod-qca-nss-drv-pppoe=y
CONFIG_PACKAGE_kmod-qca-ssdk=y
CONFIG_PACKAGE_kmod-qca-ssdk-shell=y
# 4.3 Wi-Fi驱动 (雅典娜为QCA6018 + QCA8075)
CONFIG_PACKAGE_kmod-ath11k=y
CONFIG_PACKAGE_kmod-ath11k-pci=y
CONFIG_PACKAGE_ath11k-firmware-qca6018=y
CONFIG_PACKAGE_ath11k-firmware-qca8074=y
CONFIG_PACKAGE_wpad-openssl=y
CONFIG_PACKAGE_hostapd-common=y

# ==================== 【5. 主路由网络核心功能】 ====================
# 5.1 防火墙与转发 (使用性能更好的iptables)
CONFIG_PACKAGE_iptables-mod-fullconenat=y
CONFIG_PACKAGE_iptables-mod-ipopt=y
CONFIG_PACKAGE_iptables-mod-tproxy=y
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_iptables-zz-legacy=y
# 5.2 多WAN/负载均衡/策略路由
CONFIG_PACKAGE_luci-app-mwan3=y
CONFIG_PACKAGE_luci-app-syncdial=y
# 5.3 QoS与流控
CONFIG_PACKAGE_luci-app-eqos=y
CONFIG_PACKAGE_luci-app-nft-qos=y
# 5.4 DHCP & DNS
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dnsmasq_full_ipset=y
CONFIG_PACKAGE_dnsmasq_full_conntrack=y
CONFIG_PACKAGE_dnsmasq_full_dhcpv6=y

# ==================== 【6. 利用128G存储的扩展功能】 ====================
# 6.1 Docker容器
CONFIG_PACKAGE_docker-ce=y
CONFIG_PACKAGE_dockerd=y
CONFIG_PACKAGE_luci-app-dockerman=y
# 6.2 文件共享与网络存储
CONFIG_PACKAGE_luci-app-samba4=y
CONFIG_PACKAGE_samba4-server=y
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_luci-app-diskman=y
# 6.3 Alist网盘聚合
CONFIG_PACKAGE_luci-app-alist=y
CONFIG_PACKAGE_alist=y

# ==================== 【7. 科学上网与网络增强】 ====================
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-app-wireguard=y
CONFIG_PACKAGE_kmod-wireguard=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_SHORTCUT_FE=y

# ==================== 【8. 管理与监控】 ====================
CONFIG_PACKAGE_luci-app-statistics=y # 统计图表
CONFIG_PACKAGE_luci-app-adguardhome=y # 去广告DNS
CONFIG_PACKAGE_luci-app-smartdns=y # DNS优化
CONFIG_PACKAGE_luci-app-ttyd=y # 网页终端
CONFIG_PACKAGE_luci-app-filetransfer=y # 文件上传
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_ethtool=y

# ==================== 【9. 系统与LuCI界面】 ====================
CONFIG_PACKAGE_luci=y
CONFIG_LUCI_LANG_zh_Hans=y
CONFIG_PACKAGE_default-settings=y
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-theme-edge=y

# ==================== 【10. 精简项目（节省空间）】 ====================
# 雅典娜无以下硬件，可禁用
CONFIG_PACKAGE_kmod-usb-net-qmi-wwan=n
CONFIG_PACKAGE_kmod-usb-net-rtl8152=n
CONFIG_PACKAGE_kmod-sound-core=n
CONFIG_PACKAGE_kmod-usb-audio=n
# 精简iptables模块（按需）
# CONFIG_PACKAGE_iptables-mod-extra is not set
# CONFIG_PACKAGE_iptables-mod-hashlimit is not set
# 精简IPv6（如不需要）
# CONFIG_PACKAGE_ip6tables=n
# CONFIG_PACKAGE_dhcpv6-client=n
# CONFIG_PACKAGE_dhcpv6-server=n

# ==================== 【11. 固件优化】 ====================
CONFIG_SQUASHFS_XZ=y
CONFIG_KERNEL_XZ=y
